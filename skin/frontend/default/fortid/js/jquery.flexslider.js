(function($j){$j.fn.extend({flexslider:function(options){var defaults={animation:"fade",slideshow:true,slideshowSpeed:7000,animationDuration:500,directionNav:true,controlNav:true,keyboardNav:true,touchSwipe:true,prevText:"Previous",nextText:"Next",randomize:false,slideToStart:0,pauseOnAction:true,pauseOnHover:false,controlsContainer:"",manualControls:""}
var options=$j.extend(defaults,options),slider=this,container=$j('.slides',slider),slides=$j('.slides li',slider),length=slides.length;ANIMATING=false,currentSlide=options.slideToStart;if(options.randomize&&length>1){slides.sort(function(){return(Math.round(Math.random())-0.5);});container.empty().append(slides);}if(options.animation.toLowerCase()=="slide"&&length>1){slider.css({"overflow":"hidden"});container.append(slides.filter(':first').clone().addClass('clone')).prepend(slides.filter(':last').clone().addClass('clone'));container.width(((length+2)*slider.width())+2000);var newSlides=$j('.slides li',slider);setTimeout(function(){newSlides.width(slider.width()).css({"float":"left"}).show();},100);container.css({"marginLeft":(-1*(currentSlide+1))*slider.width()+"px"});}else{slides.hide().eq(currentSlide).fadeIn(400);}function flexAnimate(target){if(!ANIMATING){ANIMATING=true;if(options.animation.toLowerCase()=="slide"){if(currentSlide==0&&target==length-1){container.animate({"marginLeft":"0px"},options.animationDuration,function(){container.css({"marginLeft":(-1*length)*slides.filter(':first').width()+"px"});ANIMATING=false;currentSlide=target;});}else if(currentSlide==length-1&&target==0){container.animate({"marginLeft":(-1*(length+1))*slides.filter(':first').width()+"px"},options.animationDuration,function(){container.css({"marginLeft":-1*slides.filter(':first').width()+"px"});ANIMATING=false;currentSlide=target;});}else{container.animate({"marginLeft":(-1*(target+1))*slides.filter(':first').width()+"px"},options.animationDuration,function(){ANIMATING=false;currentSlide=target;});}}else if(options.animation.toLowerCase()=="show"){slides.eq(currentSlide).hide();slides.eq(target).show();ANIMATING=false;currentSlide=target;}else{slider.css({"minHeight":slides.eq(currentSlide).height()});slides.eq(currentSlide).fadeOut(options.animationDuration,function(){slides.eq(target).fadeIn(options.animationDuration,function(){ANIMATING=false;currentSlide=target;});slider.css({"minHeight":"inherit"});});}}}if(options.controlNav&&length>1){if(options.manualControls!=""&&$j(options.manualControls).length>0){var controlNav=$j(options.manualControls);}else{var controlNav=$j('<ol class="flex-control-nav"></ol>');var j=1;for(var i=0;i<length;i++){controlNav.append('<li><a>'+j+'</a></li>');j++;}if(options.controlsContainer!=""&&$j(options.controlsContainer).length>0){$j(options.controlsContainer).append(controlNav);}else{slider.append(controlNav);}controlNav=$j('.flex-control-nav li a');}controlNav.eq(currentSlide).addClass('active');controlNav.click(function(event){event.preventDefault();if($j(this).hasClass('active')||ANIMATING){return;}else{controlNav.removeClass('active');$j(this).addClass('active');var selected=controlNav.index($j(this));flexAnimate(selected);if(options.pauseOnAction){clearInterval(animatedSlides);}}});}if(options.directionNav&&length>1){if(options.controlsContainer!=""&&$j(options.controlsContainer).length>0){$j(options.controlsContainer).append($j('<ul class="flex-direction-nav"><li><a class="prev" href="#">'+options.prevText+'</a></li><li><a class="next" href="#">'+options.nextText+'</a></li></ul>'));}else{slider.append($j('<ul class="flex-direction-nav"><li><a class="prev" href="#">'+options.prevText+'</a></li><li><a class="next" href="#">'+options.nextText+'</a></li></ul>'));}$j('.flex-direction-nav li a').click(function(event){event.preventDefault();if(ANIMATING){return;}else{if($j(this).hasClass('next')){var target=(currentSlide==length-1)?0:currentSlide+1;}else{var target=(currentSlide==0)?length-1:currentSlide-1;}if(options.controlNav){controlNav.removeClass('active');controlNav.eq(target).addClass('active');}flexAnimate(target);if(options.pauseOnAction){clearInterval(animatedSlides);}}});}if(options.keyboardNav&&length>1){$j(document).keyup(function(event){if(ANIMATING){return;}else if(event.keyCode!=39&&event.keyCode!=37){return;}else{if(event.keyCode==39){var target=(currentSlide==length-1)?0:currentSlide+1;}else if(event.keyCode==37){var target=(currentSlide==0)?length-1:currentSlide-1;}if(options.controlNav){controlNav.removeClass('active');controlNav.eq(target).addClass('active');}flexAnimate(target);if(options.pauseOnAction){clearInterval(animatedSlides);}}});}if(options.slideshow&&length>1){var animatedSlides;function animateSlides(){if(ANIMATING){return;}else{var target=(currentSlide==length-1)?0:currentSlide+1;if(options.controlNav){controlNav.removeClass('active');controlNav.eq(target).addClass('active');}flexAnimate(target);}}if(options.pauseOnHover){slider.hover(function(){clearInterval(animatedSlides);},function(){animatedSlides=setInterval(animateSlides,options.slideshowSpeed);});}if(length>1){animatedSlides=setInterval(animateSlides,options.slideshowSpeed);}}if(options.touchSwipe&&'ontouchstart'in document.documentElement&&length>1){slider.each(function(){var startX,min_move_x=20;isMoving=false;function cancelTouch(){this.removeEventListener('touchmove',onTouchMove);startX=null;isMoving=false;}function onTouchMove(e){if(isMoving){var x=e.touches[0].pageX,dx=startX-x;if(Math.abs(dx)>=min_move_x){cancelTouch();if(dx>0){var target=(currentSlide==length-1)?0:currentSlide+1;}else{var target=(currentSlide==0)?length-1:currentSlide-1;}if(options.controlNav){controlNav.removeClass('active');controlNav.eq(target).addClass('active');}flexAnimate(target);if(options.pauseOnAction){clearInterval(animatedSlides);}}}}function onTouchStart(e){if(e.touches.length==1){startX=e.touches[0].pageX;isMoving=true;this.addEventListener('touchmove',onTouchMove,false);}}if('ontouchstart'in document.documentElement){this.addEventListener('touchstart',onTouchStart,false);}});}if(options.animation.toLowerCase()=="slide"&&length>1){var sliderTimer;$j(window).resize(function(){newSlides.width(slider.width());container.width(((length+2)*slider.width())+2000);clearTimeout(sliderTimer);sliderTimer=setTimeout(function(){flexAnimate(currentSlide);},300);});}}});})(jQuery);